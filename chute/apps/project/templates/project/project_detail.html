{% extends 'project/base.html' %}{% load compressed chute_tags %}

{% block page_title %}{{ project.name }}{% endblock %}

{% block navigation %}
<script>
window.fbAsyncInit = function() {
  FB.init({
    appId      : '343632075713954',
    xfbml      : true,
    version    : 'v2.1'
  });
};

(function(d, s, id){
   var js, fjs = d.getElementsByTagName(s)[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement(s); js.id = id;
   js.src = "//connect.facebook.net/en_US/sdk/debug.js";
   fjs.parentNode.insertBefore(js, fjs);
 }(document, 'script', 'facebook-jssdk'));
 </script>
{{ bock.super }}
{% endblock %}

{% block jumbo %}
{% csrf_token %}
<div id="project-detail-base"></div>
{% endblock %}

{% block content %}
<div class="container-fluid">

  <div class="row">
    <!-- Feed -->
      <div id="feed-list" class="col-md-3"></div>
      <!-- PlayList -->
      <div id="playlist-feed-list" class="col-md-3"></div>
      <!-- Preview -->
      <div class="col-md-6">
          <h3>Preview</h3>
          <nav class="navbar navbar-default" role="navigation">
            <div class="container-fluid">
              <div class="row">
                <form class="form-inline" role="form">
                
                    <div class="form-group">
                      <div class="input-group col-xs-9">
                        <div class="input-group-addon">show for</div>
                        <input class="form-control input-sm" type="integer" placeholder="Number of" value="3" />
                        <div class="input-group-addon">sec</div>
                      </div>
                    </div>

                    <div class="form-group">
                        <ul class="nav navbar-nav">
                          <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Using Template <span class="caret"></span></a>
                            <ul class="dropdown-menu" role="menu">
                              <li>
                                <a href="#" class="thumbnail"><img data-src="holder.js/100%x100" alt="..."></a>
                              </li>
                              <li>
                                <a href="#" class="thumbnail"><img data-src="holder.js/100%x100" alt="..."></a>
                              </li>
                              <li>
                                <a href="#" class="thumbnail"><img data-src="holder.js/100%x100" alt="..."></a>
                              </li>
                            </ul>
                          </li>
                        </ul>
                    </div>
                </form>
              </div>
            </div>
          </nav>
          <iframe id="feed-item-detail" src="" border="0" style="border:0px;padding:0px;width:100%;height:640px;"></iframe>
      </div>
  </div>

</div>

<div id="project-detail-collaborators" class="col-md-4"></div>

{% endblock %}


{% block css %}
<style>
.feeditem_list_picture {
background-repeat: no-repeat;
background-position: 320px 0px;
height: 100px;
}
</style>
{% compressed_css 'uploader' %}
{% endblock css %}

{% block js %}

{% compressed_js 'resources' %}
{% compressed_js 'uploader' %}

<script>
'use strict';
/**
* Setup the base javascript objects for our react handler
**/
var Today = moment();

var Project = {{ view.project_json|safe|default:'{}' }};

var Playlist = {{ view.playlist_json|safe|default:'{}' }};

var Video = {};

var Links = {
  'publish': "{% if view.current_video %}{% url 'publish:settings' slug=view.current_video.slug %}{% endif %}",
};

var UploaderConfig = {
   signerUrl: "{#% url 's3signature' %#}",
   aws_key: '{{ AWS_ACCESS_KEY_ID }}',
   bucket: '{{ AWS_STORAGE_BUCKET_NAME }}',
   aws_url: 'https://s3-eu-west-1.amazonaws.com',
   aws_path: 'uploaded_video/'
};

var User = {
  'username': '{{ request.user.username }}',
  'initials': '{{ request.user.get_initials }}',
  'email': '{{ request.user.email }}'
}

/**
* Setup resource slugs
**/

ProjectPlaylistFeedResource.params.project_slug = Project.slug;

$(document).ready(function( ) {

  var iframe = $('iframe#feed-item-detail');
  iframe.height(iframe.parent().height());
  iframe.attr('src', Project.feed[0].absolute_url)

  $("a#menu-toggle").on('click', function ( e ) {
      console.log('fds')
      e.preventDefault();
      $(".sidebar_wrapper").toggleClass("toggled");
  });

  //$('div.draggable > list-group-item').draggable();

});
</script>

{% compressed_js 'project' %}


{% endblock js %}
